# Решение проблем

## Проблема: Не удалось загрузить скрипт Яндекс Карт

### Возможные причины:

1. **Неправильный URL** - должен быть `/v3/` а не `/3.0/`
2. **API ключ не активирован** - ключ активируется в течение 15 минут после получения
3. **Ограничения по HTTP Referer** - проверьте настройки ключа в панели разработчика
4. **Проблемы с интернет-соединением**

### Решение:

1. **Проверьте URL скрипта в консоли браузера** (F12 → Console)
   - Должен быть: `https://api-maps.yandex.ru/v3/?apikey=...`

2. **Проверьте API ключ:**
   - Откройте https://developer.tech.yandex.ru/
   - Убедитесь, что ключ активирован
   - Проверьте ограничения по HTTP Referer (для localhost должно быть разрешено)

3. **Попробуйте открыть URL напрямую в браузере:**
   ```
   https://api-maps.yandex.ru/v3/?apikey=ВАШ_КЛЮЧ&lang=ru_RU
   ```
   Если страница не загружается - проблема с ключом или его настройками

4. **Проверьте консоль браузера** - там будут детальные ошибки

## Проблема: API ключ не найден

### Причина
Next.js загружает переменные окружения из `.env.local` **только при старте приложения**. Если файл был создан или изменен после запуска dev сервера, нужно его перезапустить.

### Решение

1. **Остановите dev сервер** (Ctrl+C в терминале где запущен `npm run dev`)

2. **Перезапустите сервер:**
   ```bash
   npm run dev
   ```

3. **Проверьте файл `.env.local`:**
   ```bash
   # Windows PowerShell
   Get-Content .env.local
   
   # Должно быть:
   NEXT_PUBLIC_YANDEX_MAPS_API_KEY=c71cf6f8-9813-499e-90d4-119a72ce9bba
   ```

4. **Убедитесь, что:**
   - Файл называется именно `.env.local` (с точкой в начале)
   - Нет лишних пробелов вокруг `=`
   - Нет кавычек вокруг значения ключа
   - Файл находится в корне проекта (там же где `package.json`)

### Проверка в браузере

Откройте консоль браузера (F12) и проверьте:
- Должно быть сообщение: `API Key from env: Found`
- Если видите `Not found` - перезапустите сервер

### Альтернативная проверка

Создайте тестовый файл `test-env.js` в корне проекта:
```javascript
console.log('API Key:', process.env.NEXT_PUBLIC_YANDEX_MAPS_API_KEY);
```

Запустите:
```bash
node -r dotenv/config test-env.js
```

Но лучше просто перезапустить Next.js dev сервер - это самый надежный способ.

